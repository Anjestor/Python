# [3.5. Потоковый ввод/вывод. Работа с текстовыми файлами. JSON](https://education.yandex.ru/handbook/python/article/potokovyj-vvodvyvod-rabota-s-tekstovymi-fajlami-json)
## A. A+B+...
Наконец-то мы можем обрабатывать данные, не имея ни малейшего понятия об их количестве.  

Напишите программу, которая находит сумму всех чисел введённых пользователем.  

**Формат ввода**  
Вводятся строки чисел.

**Формат вывода**  
Одно число — сумма всех чисел в потоке ввода.  

---
```python
from sys import stdin

nums = []
for i in stdin:
    nums += ((i.rstrip('\n')).split())

print(sum([int(i) for i in nums]))
```

## B. Средний рост
Учитель физкультуры задался вопросом, на сколько в среднем его подопечные выросли за прошедший месяц.  

Напишите программу, которая определяет, на сколько изменился средний рост учеников в классе.  

**Формат ввода**  
Вводится информация о детях в формате:  
<Имя> <Рост месяц назад> <Рост сейчас>  

**Формат вывода**  
Одно число — ответ на вопрос задачи.  
Ответ округлите до целых. Например, функцией round.  

---
```python
from sys import stdin

nums = []
for i in stdin:
    nums.append((i.rstrip('\n')).split())

x = [int(j[2]) - int(j[1]) for j in [i for i in nums]]

print(round(sum(x) / len(nums)))
```

## C. Без комментариев 2.0
Как вы помните, когда вы комментируете свой код, перед его выполнением интерпретатор удаляет комментарии.
Напишите программу, которая выполняет данную функцию за интерпретатор.  

**Формат ввода**  
Вводятся строки программы.  

**Формат вывода**  
Каждую строку нужно очистить от комментариев.  
А если комментарий — вся строка, то выводить её не нужно.  

---
```python
from sys import stdin

ln_llst = [i for i in stdin]

print('\n'.join([(i[:i.find('#')]).rstrip() for i in ln_llst if i.find('#') != 0]))
```

## D. Найдётся всё 2.0
Поиск информации — важная часть современной жизни. Создайте программу, которая реализует маленький компонент поисковой системы.  

**Формат ввода**  
Вводятся заголовки страниц.  
В последней строке записан поисковый запрос.  

**Формат вывода**  
Вывести все заголовки страниц, в которых присутствует поисковый запрос (регистр не имеет значения).  
Порядок заголовков должен сохраниться.  

---
```python
from sys import stdin

ln_lst = [i.strip() for i in stdin]

print('\n'.join([i for i in ln_lst[:-1] if ln_lst[-1].lower() in i.lower()]))
```

## E. А роза упала на лапу Азора 6.0
Мы уже писали программы, которые определяли, а палиндром перед нами или нет.  
Давайте теперь найдём все слова-палиндромы среди введённых строк.  

**Формат ввода**  
Вводятся слова.  

**Формат вывода**  
Список слов-палиндромов в алфавитном порядке без повторений.  

**Примечание**  
При проверке слов не обращайте внимание на регистр.  

---
```python
from sys import stdin

ln_lst = []
for i in stdin:
    ln_lst += i.split()

print('\n'.join(sorted(set([i for i in ln_lst if i.lower() == i.lower()[::-1]]))))
```

## F. Транслитерация 2.0
Для международных документов русский текст преобразуется с использованием латинского алфавита. ГОСТ Р 52535.1-2006 задаёт правила транслитерации идентификационных карт.
Ниже приведена таблица замен:  

- А — A  
- Б — B  
- В — V  
- Г — G  
- Д — D  
- Е — E  
- Ё — E  
- Ж — ZH  
- З — Z  
- И — I  
- Й — I  
- К — K  
- Л — L  
- М — M  
- Н — N  
- О — O  
- П — P  
- Р — R  
- С — S  
- Т — T  
- У — U  
- Ф — F  
- Х — KH  
- Ц — TC  
- Ч — CH  
- Ш — SH  
- Щ — SHCH  
- Ы — Y  
- Э — E  
- Ю — IU  
- Я — IA  

Давайте транслитерируем русский текст.
Букву «ё» транслитерируйте как «e», «й» как «и», а «ъ» и «ь» (и их заглавные версии «Ъ» и «Ь») должны исчезнуть из текста. Строчные буквы заменяются на строчные, заглавные заменяются на заглавные. Если заглавная буква превращается при транслитерации в несколько букв, то заглавной должна остаться только первая из них (например, «Ц» → «Tc»). Все некириллические символы должны остаться на месте.  

**Формат ввода**  
В одной папке с вашей программой лежит файл cyrillic.txt. В нём, в числе прочих, содержится некоторое количество кириллических символов.  

**Формат вывода**  
В файл transliteration.txt записать результат транслитерации исходного файла.

---
```python
from sys import stdin

alphabet = {'А': 'A', 'Б': 'B', 'В': 'V',
            'Г': 'G', 'Д': 'D', 'Е': 'E',
            'Ё': 'E', 'Ж': 'ZH', 'З': 'Z',
            'И': 'I', 'Й': 'I', 'К': 'K',
            'Л': 'L', 'М': 'M', 'Н': 'N',
            'О': 'O', 'П': 'P', 'Р': 'R',
            'С': 'S', 'Т': 'T', 'У': 'U',
            'Ф': 'F', 'Х': 'KH', 'Ц': 'TC',
            'Ч': 'CH', 'Ш': 'SH', 'Щ': 'SHCH',
            'Ъ': '', 'Ы': 'Y', 'Ь': '',
            'Э': 'E', 'Ю': 'IU', 'Я': 'IA'}

ln = ''
line = ''
with open('cyrillic.txt', encoding='UTF-8') as file_in:
    for i in file_in:
        line += i

for i in line:
    if i.upper() in alphabet:
        ln += alphabet[i.upper()].lower().capitalize() if i.isupper() else alphabet[i.upper()].lower()
    else:
        ln += i

with open('transliteration.txt', 'w', encoding='UTF-8') as file_out:
    print(ln, file=file_out)

print(ln)
```

## G. Файловая статистика
Напишите программу, которая для заданного файла вычисляет следующие параметры:  

- количество всех чисел;  
- количество положительных чисел;  
- минимальное число;  
- максимальное число;  
- сумма всех чисел;  
- среднее арифметическое всех чисел с точностью до двух знаков после запятой.  

**Формат ввода**  
Пользователь вводит имя файла.  
Файл содержит произвольное количество чисел, разделённых пробелами и символами перевода строки.  

**Формат вывода**  
Выведите статистику в указанном порядке.  

---
```python
from itertools import chain

fn = str(input())
line = []


with open(fn, encoding='UTF-8') as file_in:
    line += list(chain.from_iterable([i.rstrip().split() for i in file_in]))

res = [len(line), len([i for i in line if int(i) > 0]), min(int(i) for i in line),
       max(int(i) for i in line), sum(int(i) for i in line),
       round(sum(int(i) for i in line) / len(line), 2)]

print('\n'.join([str(i) for i in res]))
```

## H. Файловая разница
Напишите программу, которая определяет, какие слова есть только в одном из файлов.  

**Формат ввода**  
Пользователь вводит три имени файлов.  
Каждый из входных файлов содержит произвольное количество слов, разделённых пробелами и символами перевода строки.  

**Формат вывода**  
В третий файл выведите в алфавитном порядке без повторений список слов, которые есть только в одном из файлов.  

---
```python
from itertools import chain

fn = [str(input()) for i in range(3)]
line = []


for file in fn[:2]:
    with open(file, encoding='UTF-8') as file_in:
        line.append(set(chain.from_iterable([i.rstrip().split() for i in file_in])))


with open(fn[-1], 'w', encoding='UTF-8') as file_out:
    print('\n'.join(sorted(line[0] ^ line[1])), file=file_out)
```

## I. Файловая чистка
Python в первую очередь скриптовый язык. Такие языки часто используются для создания консольных утилит.  

Напишите простую утилиту, которая очищает заданный файл от:  

- повторяющихся пробелов;  
- повторяющихся символов перевода строки;  
- табуляций,  
- излишних пробелов в начале и конце строк.  

**Формат ввода**  
Пользователь вводит два имени файлов.  
Входной файл содержит неформатированный текст произвольной длины.  

**Формат вывода**  
Во второй файл выведите очищенный текст.  

---
```python
from itertools import chain

fn = [str(input()) for i in range(2)]
line = []


for file in fn[:1]:
    with open(file, encoding='UTF-8') as file_in:
        line += [i for i in file_in]

with open(fn[-1], 'w', encoding='UTF-8') as file_out:
    print('\n'.join([' '.join(j.split())
          for j in [i.strip().replace('\t', '') for i in line] if j != '']),
          file=file_out)
```

## J. Хвост
В семействе операционных систем Linux существует одна прекрасная консольная утилита — tail. Она предназначена для случаев, когда нам не нужно читать весь файл, а достаточно просмотреть только несколько последних строк.  

Напишите аналог этой утилиты.  

**Формат ввода**  
Пользователь вводит имя файла (F), а затем количество строк (N), которые он хочет увидеть.  

**Формат вывода**  
Выведите N последних строк файла F.  

---
```python
F = str(input())
N = int(input())

with open(F, encoding='UTF-8') as file_in:
    print(''.join([i for i in file_in][-1 * N:]))
```

## K. Файловая статистика 2.0
Напишите программу, которая для заданного файла вычисляет следующие параметры:  

- количество всех чисел;  
- количество положительных чисел;  
- минимальное число;  
- максимальное число;  
- сумма всех чисел;  
- среднее арифметическое всех чисел с точностью до двух знаков после запятой.  

**Формат ввода**  
Пользователь вводит два имени файла.  
Первый файл содержит произвольное количество чисел, разделённых пробелами и символами перевода строки.  

**Формат вывода**  
Выведите статистику во второй файл в формате JSON.  

Ключи значений задайте соответственно:  

- count — количество всех чисел;  
- positive_count — количество положительных чисел;  
- min — минимальное число;  
- max — максимальное число;  
- sum — сумма всех чисел;  
- average — среднее арифметическое всех чисел с точностью до двух знаков после запятой.  

---
```python
from itertools import chain
import json

num_file = str(input())
stat_file = str(input())
nums = []

with open(num_file, encoding="UTF-8") as file_in:
    nums += list(chain.from_iterable([i for i in [j.strip().split() for j in file_in]]))

stats = {
         "count": len(nums),
         "positive_count": sum(1 for i in nums if int(i) > 0),
         "min": min(int(i) for i in nums),
         "max": max(int(i) for i in nums),
         "sum": sum(int(i) for i in nums),
         "average": round(sum(int(i) for i in nums) / len(nums), 2)
}

with open(stat_file, "w", encoding="UTF-8") as file_out:
    json.dump(stats, file_out, ensure_ascii=False, indent=4)
```
